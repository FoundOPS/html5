(function($){$.fn.qrcode=function(options){typeof options=="string"&&(options={text:options}),options=$.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},options);var createCanvas=function(){var qrcode=new QRCode(options.typeNumber,options.correctLevel);qrcode.addData(options.text),qrcode.make();var canvas=document.createElement("canvas");canvas.width=options.width,canvas.height=options.height;var ctx=canvas.getContext("2d"),tileW=options.width/qrcode.getModuleCount(),tileH=options.height/qrcode.getModuleCount();for(var row=0;row<qrcode.getModuleCount();row++)for(var col=0;col<qrcode.getModuleCount();col++){ctx.fillStyle=qrcode.isDark(row,col)?options.foreground:options.background;var w=Math.ceil((col+1)*tileW)-Math.floor(col*tileW),h=Math.ceil((row+1)*tileW)-Math.floor(row*tileW);ctx.fillRect(Math.round(col*tileW),Math.round(row*tileH),w,h)}return canvas},createTable=function(){var qrcode=new QRCode(options.typeNumber,options.correctLevel);qrcode.addData(options.text),qrcode.make();var $table=$("<table></table>").css("width",options.width+"px").css("height",options.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",options.background),tileW=options.width/qrcode.getModuleCount(),tileH=options.height/qrcode.getModuleCount();for(var row=0;row<qrcode.getModuleCount();row++){var $row=$("<tr></tr>").css("height",tileH+"px").appendTo($table);for(var col=0;col<qrcode.getModuleCount();col++)$("<td></td>").css("width",tileW+"px").css("background-color",qrcode.isDark(row,col)?options.foreground:options.background).appendTo($row)}return $table};return this.each(function(){var element=options.render=="canvas"?createCanvas():createTable();jQuery(element).appendTo(this)})}})(jQuery)