// Copyright 2012 FoundOPS LLC. All Rights Reserved.

define(["db/services","tools","widgets/settingsMenu"],function(services,tools){var createPassword={};return createPassword.save=function(){var newPass=$("#createNew")[0].value,confirmPass=$("#createConfirm")[0].value;createPassword.validator.validate&&(services.createPassword(newPass,confirmPass),$("#createNew")[0].value="",$("#createConfirm")[0].value="",tools.disableButtons("#createPassword"))},createPassword.initialize=function(){var menu=$("#createPassword .settingsMenu");kendo.bind(menu),menu.kendoSettingsMenu(),$("#createPassword input").on("change",function(){tools.enableButtons("#createPassword")}),createPassword.validator=$("#createPasswordForm").kendoValidator({rules:{custom:function(input){return input.is("[name=createConfirm]")&&input.val()===$("#createNew")[0].value||!input.is("[name=createConfirm]")}},messages:{custom:"The passwords do not match."}}).data("kendoValidator")},window.createPassword=createPassword,createPassword})